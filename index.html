<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§—É—Ç–±–æ–ª—å–Ω–∞—è –¢—É—Ä–Ω–∏—Ä–Ω–∞—è –¢–∞–±–ª–∏—Ü–∞</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öΩ –§—É—Ç–±–æ–ª—å–Ω–∞—è –¢—É—Ä–Ω–∏—Ä–Ω–∞—è –¢–∞–±–ª–∏—Ü–∞</h1>
            <div class="admin-panel">
                <button id="adminLoginBtn" class="btn">–í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</button>
                <div id="adminSection" class="hidden">
                    <span>–†–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</span>
                    <button id="cleanupStorageBtn" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à</button>
                    <button id="logoutBtn" class="btn btn-secondary">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </header>

        <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="mobile-tabs">
            <div class="mobile-tab active" data-tab="standings">üèÜ –¢–∞–±–ª–∏—Ü–∞</div>
            <div class="mobile-tab" data-tab="matches">üìÖ –ú–∞—Ç—á–∏</div>
            <div class="mobile-tab" data-tab="team">üë• –ö–æ–º–∞–Ω–¥–∞</div>
            <div class="mobile-tab" data-tab="analytics">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
        </nav>

        <!-- –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="desktop-tabs">
            <button class="desktop-tab active" data-tab="standings">üèÜ –¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞</button>
            <button class="desktop-tab" data-tab="matches">üìÖ –ú–∞—Ç—á–∏</button>
            <button class="desktop-tab" data-tab="team">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</button>
            <button class="desktop-tab" data-tab="analytics">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
        </nav>

        <main>
            <!-- –¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ -->
            <section id="standingsSection" class="standings-section tab-content active">
                <h2>üèÜ –¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞</h2>
                <div class="table-container">
                    <table class="standings-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>–ö–æ–º–∞–Ω–¥–∞</th>
                                <th>–ò–≥—Ä—ã</th>
                                <th>–í</th>
                                <th>–ù</th>
                                <th>–ü</th>
                                <th>–ì–æ–ª—ã</th>
                                <th>–†–∞–∑–Ω.</th>
                                <th>–û—á–∫–∏</th>
                            </tr>
                        </thead>
                        <tbody id="standingsBody">
                            <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- –ú–∞—Ç—á–∏ -->
            <section id="matchesSection" class="matches-section tab-content">
                <h2>üìÖ –ú–∞—Ç—á–∏</h2>
                
                <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–∞—Ç—á–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞) -->
                <div id="addMatchForm" class="hidden">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç—á</h3>
                    <div class="form-row">
                        <input type="text" id="opponentName" class="form-control" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã —Å–æ–ø–µ—Ä–Ω–∏–∫–∞" required minlength="2" maxlength="50">
                        <input type="date" id="matchDate" class="form-control" required>
                        <button id="addMatchBtn" class="btn">–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç—á</button>
                    </div>
                </div>

                <div class="matches-list" id="matchesList">
                    <!-- –°–ø–∏—Å–æ–∫ –º–∞—Ç—á–µ–π -->
                </div>
            </section>

            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞) -->
            <section id="teamSection" class="team-section tab-content">
                <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π</h2>
                
                <!-- –≠—Ç–∞ —Å–µ–∫—Ü–∏—è –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É -->
                <div id="teamManagement" class="hidden">
                    <div class="team-form">
                        <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–∞–Ω–¥–µ</h3>
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã:</label>
                            <input type="text" id="teamName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã" required minlength="2" maxlength="30">
                        </div>
                        <button id="saveTeamBtn" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É</button>
                    </div>

                    <div class="players-management">
                        <h3>–°–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã</h3>
                        <div class="add-player-form">
                            <div class="form-row">
                                <input type="text" id="playerName" class="form-control" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞" required minlength="2" maxlength="30">
                                <input type="text" id="playerPosition" class="form-control" placeholder="–ü–æ–∑–∏—Ü–∏—è">
                                <input type="number" id="playerNumber" class="form-control" placeholder="–ù–æ–º–µ—Ä" min="1" max="99">
                                <button id="addPlayerBtn" class="btn">–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
                            </div>
                        </div>
                        
                        <div class="players-list">
                            <h4>–¢–µ–∫—É—â–∏–π —Å–æ—Å—Ç–∞–≤:</h4>
                            <div id="playersContainer" class="players-grid">
                                <!-- –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≥–æ—Å—Ç–µ–π -->
                <div id="teamGuestMessage" class="guest-message">
                    <p>–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥–æ–π –≤–æ–π–¥–∏—Ç–µ –≤ —Ä–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
                </div>
            </section>

            <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ -->
            <section id="analyticsSection" class="analytics-section tab-content">
                <h2>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã</h2>
                <div class="analytics-grid">
                    <div class="stat-card">
                        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∞—Ç—á–µ–π</h3>
                        <div id="matchesStats" class="stats-content">
                            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —á–µ—Ä–µ–∑ JS -->
                        </div>
                    </div>
                    <div class="stat-card">
                        <h3>–õ—É—á—à–∏–µ –±–æ–º–±–∞—Ä–¥–∏—Ä—ã</h3>
                        <div id="topScorers" class="stats-content">
                            <!-- –¢–æ–ø –±–æ–º–±–∞—Ä–¥–∏—Ä—ã -->
                        </div>
                    </div>
                    <div class="stat-card">
                        <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                        <div id="recentResults" class="stats-content">
                            <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—á—ë—Ç–∞ -->
        <div id="scoreModal" class="modal hidden">
            <div class="modal-content">
                <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á—ë—Ç–∞</h3>
                <div class="match-teams">
                    <div class="team-score">
                        <span id="homeTeamName"></span>
                        <input type="number" id="homeScore" class="score-input" min="0" value="0">
                    </div>
                    <div class="score-separator">-</div>
                    <div class="team-score">
                        <input type="number" id="awayScore" class="score-input" min="0" value="0">
                        <span id="awayTeamName"></span>
                    </div>
                </div>
                <div class="modal-actions">
                    <button id="saveScoreBtn" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="cancelScoreBtn" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Ç—á–∞ -->
        <div id="editMatchModal" class="modal hidden">
            <div class="modal-content">
                <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ç—á–∞</h3>
                <div class="form-group">
                    <label>–°–æ–ø–µ—Ä–Ω–∏–∫:</label>
                    <input type="text" id="editOpponentName" class="form-control" required minlength="2" maxlength="50">
                </div>
                <div class="form-group">
                    <label>–î–∞—Ç–∞ –º–∞—Ç—á–∞:</label>
                    <input type="date" id="editMatchDate" class="form-control" required>
                </div>
                <div class="modal-actions">
                    <button id="updateMatchBtn" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="deleteMatchBtn" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å –º–∞—Ç—á</button>
                    <button id="cancelEditBtn" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–∞ -->
        <div id="playerStatsModal" class="modal hidden">
            <div class="modal-content">
                <h3 id="playerStatsTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞</h3>
                <div id="playerStatsContent">
                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ —á–µ—Ä–µ–∑ JS -->
                </div>
                <div class="modal-actions">
                    <button id="closeStatsBtn" class="btn btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏–≥—Ä–æ–∫–∞ -->
        <div id="playerStatsEditModal" class="modal hidden">
            <div class="modal-content">
                <h3 id="playerStatsEditTitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏–≥—Ä–æ–∫–∞</h3>
                <div class="form-group">
                    <label>–ì–æ–ª—ã:</label>
                    <input type="number" id="playerGoals" class="form-control" min="0" value="0">
                </div>
                <div class="form-group">
                    <label>–ê—Å—Å–∏—Å—Ç—ã:</label>
                   <input type="number" id="playerAssists" class="form-control" min="0" value="0">
                </div>
                <div class="form-group">
                   <label>–ñ—ë–ª—Ç—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏:</label>
                   <input type="number" id="playerYellowCards" class="form-control" min="0" value="0">
               </div>
               <div class="form-group">
                   <label>–ö—Ä–∞—Å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏:</label>
                   <input type="number" id="playerRedCards" class="form-control" min="0" value="0">
                   <small style="color: #666; font-size: 12px;">–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Å–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫</small>
               </div>
               <div class="modal-actions">
                   <button id="savePlayerStatsBtn" class="btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
                   <button id="cancelPlayerStatsBtn" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
               </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—Ö–æ–¥–∞ (–û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø) -->
        <div id="loginModal" class="modal hidden">
            <div class="modal-content">
                <h3>–í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</label>
                    <input type="password" id="adminPassword" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required minlength="4" maxlength="20">
                </div>
                <div class="modal-actions">
                    <button id="loginBtn" class="btn">
                        <span id="loginText">–í–æ–π—Ç–∏</span>
                        <span id="loginSpinner" class="loading-spinner hidden"></span>
                    </button>
                    <button id="setupBtn" class="btn btn-secondary">
                        <span id="setupText">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–ø–µ—Ä–≤—ã–µ</span>
                        <span id="setupSpinner" class="loading-spinner hidden"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="db.js"></script>
    <script src="script.js"></script>
    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker –¥–ª—è PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(registration => console.log('SW registered'))
                .catch(error => console.log('SW registration failed'));
        }
    </script>
</body>
</html>